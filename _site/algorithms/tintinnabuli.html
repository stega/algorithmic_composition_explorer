<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Algorhthmic Composition Explorer - Arvo Pärt - Tintinnabuli</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!-- HTML TO PDF CONVERTER -->
    <script src="https://cdn.jsdelivr.net/npm/js-html2pdf@1.1.4/lib/html2pdf.min.js"></script>
    <!-- TONEJS -->
    <script src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi@2.0.28/build/Midi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/filesaver.js@1.3.4/FileSaver.min.js"></script>
    <!-- TONAL -->
    <script src="https://cdn.jsdelivr.net/npm/tonal/browser/tonal.min.js"></script>
    <!-- MARKOV CHAINS  -->
    <script src="https://cdn.jsdelivr.net/npm/js-markov@3.0.3/dist/markov.node.min.js"></script>

    <link rel="stylesheet" href="/algorithmic_composition_explorer/assets/css/styles.css" />
    <script src="/algorithmic_composition_explorer/assets/js/instruments/piano.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/instruments/synth.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/app.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/abcjs-basic-min.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/score.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/mixins/import-abc-mixin.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/audio-player.js"></script>
    <script src="/algorithmic_composition_explorer/assets/js/algorithms/tintinnabuli.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-2 mb-5"><nav class='pe-3 '>
  <a href="/algorithmic_composition_explorer/index.html">
  <h2>Algorithmic<br /> Composition<br /> Explorer</h2>
  </a>

  <div class="nav flex-column">
    
      <a href="/algorithmic_composition_explorer/algorithms/guido.html" class="nav-link">
        
          <!--  -->
          
        
        Guido of Arezzo
      </a>
    
      <a href="/algorithmic_composition_explorer/algorithms/dice.html" class="nav-link">
        
          <!--  -->
          
        
        Dice games
      </a>
    
      <a href="/algorithmic_composition_explorer/algorithms/markov.html" class="nav-link">
        
          <!--  -->
          
        
        Markov chains
      </a>
    
      <a href="/algorithmic_composition_explorer/algorithms/tintinnabuli.html" class="nav-link">
        
          <!--  -->
           ➪ 
        
        Tintinnabuli
      </a>
    

    <a class="mt-4" style="font-size: 0.8em;" href="https://stephengardener.com">stephengardener.com</a>
  </div>
</nav>
</div>
        <div class="col-sm-10">
          <div class="row">
            <h1 class="mb-4">Arvo Pärt - Tintinnabuli</h1>
          </div>
          <div class="row gx-5 mb-5">
            <div class="col-sm-6"><!-- <h4 class='mb-3'>Try it yourself!</h4> -->
<div class="container algo-panel pt-4 rounded-3">
  <form enctype="multipart/form-data">
    <div class='row'>
  <div class='col'>
    <label for="key-select" class='form-label'>Key</label>
    <select class="form-select" id="key-select">
      
<option value="A" >A</option>
<option value="Bb" >Bb</option>
<option value="B" >B</option>
<option value="C"  selected  >C</option>
<option value="Db" >Db</option>
<option value="D" >D</option>
<option value="Eb" >Eb</option>
<option value="E" >E</option>
<option value="F" >F</option>
<option value="Gb" >Gb</option>
<option value="G" >G</option>
<option value="Ab" >Ab</option>
    </select>
  </div>
  <div class='col pt-4'>
    <div class="form-check">
      <input class="form-check-input" value='major' type="radio"  name="scale-type-radio" id="scale-type-radio-major">
      <label class="form-check-label" for="scale-type-radio-major">
        Major
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" value='minor' type="radio" checked name="scale-type-radio" id="scale-type-radio-minor">
      <label class="form-check-label" for="scale-type-radio-minor">
        Minor
      </label>
    </div>
  </div>
</div>

    <div class="sequencer my-4">
      <label class="mb-2">Rhythm Sequencer</label>
      <div class="row">
        <div class="col">
          <div
            class="btn-group"
            role="group"
            aria-label="Basic checkbox toggle button group"
            id="seq-btns"
          >
            <input
              type="checkbox"
              class="btn-check"
              id="seq1"
              autocomplete="off"
              checked
            />
            <label class="btn btn-outline-primary me-1" for="seq1">1</label>

            <input
              type="checkbox"
              class="btn-check"
              id="seq2"
              autocomplete="off"
              checked
            />
            <label class="btn btn-outline-primary me-1" for="seq2">2</label>

            <input
              type="checkbox"
              class="btn-check"
              id="seq3"
              autocomplete="off"
            />
            <label class="btn btn-outline-primary me-1" for="seq3">3</label>

            <input
              type="checkbox"
              class="btn-check"
              id="seq4"
              autocomplete="off"
              checked
            />
            <label class="btn btn-outline-primary me-1" for="seq4">4</label>

            <input
              type="checkbox"
              class="btn-check"
              id="seq5"
              autocomplete="off"
            />
            <label class="btn btn-outline-primary me-1" for="seq5">5</label>
          </div>
        </div>
        <div class="col text-end">
          <button type="button" class="btn btn-outline-secondary" id="seq-plus">
            +
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary"
            id="seq-minus"
          >
            -
          </button>
        </div>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col mt-3">
        BPM: <strong><span id='bpm-display'>70</span></strong>
<input type="range" class="form-range" min="40" max="100" step="2" id="bpm">
      </div>
    </div>
    <div class="">
      <h5 class="mt-4">M-part</h5>
      <label for="direction-select" class="form-label mt-2">Direction</label>
      <select class="form-select" id="direction-select">
        <option value="up">Ascending</option>
        <option value="down" selected>Descending</option>
        <option value="updown">Ascending / descending</option>
        <!-- <option value="random">Random</option> -->
      </select>
      <h5 class="mt-4">T-part</h5>
      <div class="row">
        <div class="col">
          <label for="octave-select" class="form-label">Octave</label>
          <select class="form-select" id="octave-select">
            <option value="8P" selected>Above M-part</option>
            <option value="-8P">Below M-part</option>
          </select>
        </div>
        <div class="col">
          <label for="chordtone-select" class="form-label">Chord Tones</label>
          <select class="form-select" id="chordtone-select">
            <option selected>1-3-5</option>
            <option>1-3-5-7</option>
          </select>
        </div>
      </div>
    </div>
  </form>

  <!-- GENERATE NOTES BUTTON -->
  <div class="row my-4 px-3">
    <div class="col-12 text-end">
      <button
        class="btn btn-primary"
        id="genNotes"
        data-bs-toggle="modal"
        data-bs-target="#playerModal"
      >
        Generate!
      </button>
    </div>
  </div>
</div>

<!-- MODAL -->
<div class="modal fade" id="playerModal" tabindex="-1" aria-labelledby="playerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="playerModalLabel">Generated score</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center">
        <div id="staff">
          <h4 class='text-center mt-4'>There are no notes to display!</h4>
          <p class='text-center'>Try playing around with the algorithm some more.</p>
        </div>
      </div>
      <div id='instrument-chooser' hidden>
        <div class='row px-4 pt-4 pb-3 border-top'>
  <h6>Choose instrument</h6>

  <div class='col'>
    <select class="form-select" id="instrument-select">
      <option value="piano"  selected >Piano</option>
      <option value="synth" >Synth</option>
    </select>
  </div>
  <div class='col mt-2'>
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="delay-switch" >
      <label class="form-check-label" for="delay-switch">Add echo</label>
    </div>
  </div>
</div>

      </div>
      <div class="modal-footer" hidden>
        <div class='row'>
          <div class='col'>
            <!-- DOWNLOAD BUTTONS -->
            <button type="button" id='downloadMIDI' class="btn btn-secondary" onclick="scoreToMIDI()">
              <strong><i class="bi bi-download"></i></strong>
              MIDI
            </button>
            <button type="button" id='downloadScore' class="btn btn-secondary" onclick="scoreToPDF()">
              <strong><i class="bi bi-download"></i></strong>
              Score
            </button>
          </div>
        </div>

        <div class='row'>
          <div class='col'>
            <!-- STOP BUTTON -->
            <button type="button" class="btn btn-secondary stop-button" id='stop' disabled>
              <strong><i class="bi bi-stop-fill"></i></strong>
              Stop
            </button>
            <!-- PLAY BUTTON -->
            <button type="button" id='play' class='btn btn-primary'>
              <strong><i class="bi bi-play-fill"></i></strong>
              Play
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!------------------------------------------------------------------------------------------------------>



<!------------------------------------------------------------------------------------------------------>


</div>
            <div class="col-sm-6 pe-sm-5 mb-4">
              <!-- <h4 class="mb-3">About</h4> -->
              
<p class="mb-4">
  Tintinnabuli, from the Latin for bell, is a compositional style created by the
  Estonian composer Arvo Pärt. It has been characterised as serene and
  enigmatic, sounding both modern and ancient at the same time. There are two
  elements that work together in the tintinnabuli style. The M-part represents a
  melodic line, moving stepwise through a scale. The second part, the T-part,
  consists of chord tones taken from a major or minor triad.
</p>
<h3>Instructions</h3>
<ol>
  <li>Set the key of the piece.</li>
  <li>
    The sequencer can be used to generate different rhythms. Try using the [+]
    and [-] buttons to change the length.
  </li>
  <li>
    The M-part (melody part) can be an ascending or descending line, or just
    plain random.
  </li>
  <li>
    The T-part (triad part) can be pitched an octave above or below the M-part.
  </li>
  <li>Generate music!</li>
</ol>

            </div>
          </div>
          <!-- <div class="row">
            <div class="col">
<h4>The code</h4>
<pre>
  <code>// generate scale in selected key
var scale = generateScale(score.key, 4)
var tPart = generateChordTones(scale, octave, chordTones)
var mPart = applyPatternToScale(scale, [1], direction)
var rhythmPattern = convertPatternToNoteLengths(pattern)

// step through rhythm pattern and build Score from mPart & tPart notes
var mPartIndex = 0
for(var i = 0; i < rhythmPattern.length; i++){
  // get note length for this step
  var stepLen = rhythmPattern[i]

  // add the next note in the M Part to the Score
  note = mPart[mPartIndex]
  score.addNote(note, stepLen, 0)

  // add random note from the T Part to the Score
  tIndex = Math.floor(Math.random() * tPart.length)
  score.addNote(tPart[tIndex], stepLen, 1)

  // move index to the next note in the M Part
  mPartIndex += 1

  // if we have reached the end of the rhythm patter, but still have
  // notes left to play, start the pattern over
  if(i == rhythmPattern.length-1 && mPartIndex < mPart.length){
    i = -1
  }
  // if we have no more notes to add, break
  if(mPartIndex === mPart.length){ break }
}
// display score
score.render()
  </code>
</pre>
</div>
          </div> -->
        </div>
      </div>
    </div>
  </body>
</html>
